<div id="show_event_details" class="x-small-box y-small-box position-y-top position-x-left drop-shadow">
  <div class="result">
    <div class="result-image">
      <%= image_tag(url_for_event_image(@event))%>
    </div>
    <div class="result-text">
      <div class="result-title">
        <%= truncate_html(@event.title, :length => 50) %>
      </div>
      <div class="result-date">
        <%= @event.date_range_as_sentence %>
      </div>
    </div>
    <div class="result-tags">
      Tags: <%= @event.event_keywords_as_sentence %>
    </div>
    <div class="result-description">
      <%= @event.description %>
    </div>
  </div>
</div>

<div id="show_view" class="<%="hidden" if params[:invite]%>">
  <div class="x-small-box y-medium-box position-y-middle position-x-left drop-shadow expand-height">
    <%= form_for [@event, @comment], :remote => true, :html => {:id => "event_wall_form"} do |form| %>
      <div id="event_wall_text_field_holder">
        <%= form.text_area :body, :id => "event_wall_text_field", :placeholder => "Leave a Message", :rows => 1-%>
      </div>
    <% end %>
    <div id="event_wall" class="expand-height" style="overflow-y: auto; overflow-x: hidden;">
      <%@comments.each do |comment|%>
        <%= render :partial => 'comments/create.html', :locals => {:comment => comment} %>
      <% end %>
    </div>

    <div style="clear: both;">&nbsp;</div>
  </div>

  <!--TODO better button and placement-->
  <%= image_tag('header-close.png', :class => 'position-y-middle position-x-center') %>

  <div class="position-y-top position-x-center">
    <div id="join_btn_holder" class="drop-shadow">
      <%=render(:partial => 'rsvp_buttons', :locals => {:event => @event})%>
    </div>

    <div id="show_attendees_holder" class="drop-shadow">
      <div id="show_attendees_title">
        <%= "#{pluralize @event.number_of_attendees, 'Person'} Attending" %>
      </div>
      <div id="show_attendees_list_holder">
        <ul id="show_attendees_list">
          <% @event.event_rsvps.attending.each do |attendee|%>
            <li class="show-attendee-holder">
              <%=avatar(attendee.user, :size => "55x55", :class=> "drop-shadow")%>
              <span class="attendee-name hidden">
                <%=attendee.user.name%>
              </span>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>
</div>

<div id="invitation_view" class="<%="hidden" unless params[:invite] %>">
  <%= render :partial => 'invitations/index.html', :locals => {:event => @event, :user_list => @invitation_user_connections} %>
</div>

<%= hidden_field_tag 'lat', @event.location.latitude %>
<%= hidden_field_tag 'lng', @event.location.longitude %>
<%= hidden_field_tag 'location_text', @event.location.text %>
<%= hidden_field_tag 'address', @event.location.short_address_as_sentence %>

<%= javascript_include_tag 'infobubble', "site_specific/show_event"%>
