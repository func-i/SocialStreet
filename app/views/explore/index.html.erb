<%- if params[:view].blank? || params[:view].eql?("list") -%>
  <%= render "list_view" -%>
<%- else -%>
  <%= render "map_view" -%>
<%- end -%>

<input type="hidden" id="explore-id" name="explore-id" value="<%=@explore_id%>"/>
<input type="hidden" id="filter-level" name="filter-level" value="<%=@filter_level%>"/>
<input type="hidden" id="events-offset" name="events-offset" value="<%=@events_offset%>"/>
<input type="hidden" id="messages-offset" name="messages-offset" value="<%=@messages_offset%>"/>

<script>
  function isScrolledIntoView(elem, offset)
  {
    var $elem = $(elem)
    if($elem.length <= 0)
      return true;
    
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();

    var elemTop = $(elem).offset().top;
    if(offset == undefined)
      offset = 200;
    var elemBottom = elemTop + offset;

    return ((docViewTop < elemTop) && (docViewBottom > elemBottom));
    //return ((elemBottom >= docViewTop) && (elemTop <= docViewBottom));
  }

  $(function() {
     $(window).resize(function () {
      checkMapPageSize();
    });
  });
</script>
