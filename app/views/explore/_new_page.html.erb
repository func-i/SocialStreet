<script>
  $('#action-list').append(
  '<%= escape_javascript render("results", :searchable_results => @searchables)%>'
);

<% if @offset + @per_page >= @searchable_total_count && (!params[:view].eql?("map") || @searchable_total_count < ExploreController.MORE_RESULTS_LIMIT)%>
    $('#end-of-results-message').show();
<% end %>

<% if !@similar_results.blank?() %>
    $('#more-results-message').show();
    $('#similar-results-list').append('<%= escape_javascript(render('results', :searchable_results => @similar_results)) %>');
<% end %>

  clearSidebarMarkers();
  clearSidebarClusterMarkers();

<% @searchables.each do |searchable| %>
  <% if searchable.geo_located? %>
      placeExploreMarker(new google.maps.LatLng(<%= searchable.location.latitude %>, <%= searchable.location.longitude %>), <%= searchable.id -%>);
  <% end %>
<% end %>

<% unless @similar_results.blank?() %>
  <% @similar_results.each do |searchable| %>
    <% if searchable.geo_located? %>
        placeExploreMarker(new google.maps.LatLng(<%= searchable.location.latitude %>, <%= searchable.location.longitude %>), <%= searchable.id -%>);
    <% end %>
  <% end %>
<% end %>

  placeSidebarClusterMarkers();  

</script>