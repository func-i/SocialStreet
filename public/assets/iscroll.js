/*!
 * iScroll Lite base on iScroll v4.1.6 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(){var o=Math,s=(/webkit/i).test(navigator.appVersion)?"webkit":(/firefox/i).test(navigator.userAgent)?"Moz":"opera" in window?"O":"",j="WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix(),r="ontouchstart" in window,e=s+"Transform" in document.documentElement.style,h=(/iphone|ipad/gi).test(navigator.appVersion),c=(/playbook/gi).test(navigator.appVersion),f=h||c,l=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(m){return setTimeout(m,17)}})(),k=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout})(),g="onorientationchange" in window?"orientationchange":"resize",a=r?"touchstart":"mousedown",n=r?"touchmove":"mousemove",d=r?"touchend":"mouseup",q=r?"touchcancel":"mouseup",b="translate"+(j?"3d(":"("),i=j?",0)":")",p=function(u,m){var v=this,w=document,t;v.wrapper=typeof u=="object"?u:w.getElementById(u);v.wrapper.style.overflow="hidden";v.scroller=v.wrapper.children[0];v.options={hScroll:true,vScroll:true,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,onRefresh:null,onBeforeScrollStart:function(x){x.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(t in m){v.options[t]=m[t]}v.options.useTransform=e?v.options.useTransform:false;v.options.hScrollbar=v.options.hScroll&&v.options.hScrollbar;v.options.vScrollbar=v.options.vScroll&&v.options.vScrollbar;v.options.useTransition=f&&v.options.useTransition;v.scroller.style[s+"TransitionProperty"]=v.options.useTransform?"-"+s.toLowerCase()+"-transform":"top left";v.scroller.style[s+"TransitionDuration"]="0";v.scroller.style[s+"TransformOrigin"]="0 0";if(v.options.useTransition){v.scroller.style[s+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"}if(v.options.useTransform){v.scroller.style[s+"Transform"]=b+"0,0"+i}else{v.scroller.style.cssText+=";position:absolute;top:0;left:0"}v.refresh();v._bind(g,window);v._bind(a);if(!r){v._bind("mouseout",v.wrapper)}};p.prototype={enabled:true,x:0,y:0,steps:[],scale:1,handleEvent:function(t){var m=this;switch(t.type){case a:if(!r&&t.button!==0){return}m._start(t);break;case n:m._move(t);break;case d:case q:m._end(t);break;case g:m._resize();break;case"mouseout":m._mouseout(t);break;case"webkitTransitionEnd":m._transitionEnd(t);break}},_resize:function(){this.refresh()},_pos:function(m,t){m=this.hScroll?m:0;t=this.vScroll?t:0;if(this.options.useTransform){this.scroller.style[s+"Transform"]=b+m+"px,"+t+"px"+i+" scale("+this.scale+")"}else{m=o.round(m);t=o.round(t);this.scroller.style.left=m+"px";this.scroller.style.top=t+"px"}this.x=m;this.y=t},_start:function(w){var v=this,t=r?w.touches[0]:w,u,m,z;if(!v.enabled){return}if(v.options.onBeforeScrollStart){v.options.onBeforeScrollStart.call(v,w)}if(v.options.useTransition){v._transitionTime(0)}v.moved=false;v.animating=false;v.zoomed=false;v.distX=0;v.distY=0;v.absDistX=0;v.absDistY=0;v.dirX=0;v.dirY=0;if(v.options.momentum){if(v.options.useTransform){u=getComputedStyle(v.scroller,null)[s+"Transform"].replace(/[^0-9-.,]/g,"").split(",");m=u[4]*1;z=u[5]*1}else{m=getComputedStyle(v.scroller,null).left.replace(/[^0-9-]/g,"")*1;z=getComputedStyle(v.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(m!=v.x||z!=v.y){if(v.options.useTransition){v._unbind("webkitTransitionEnd")}else{k(v.aniTime)}v.steps=[];v._pos(m,z)}}v.absStartX=v.x;v.absStartY=v.y;v.startX=v.x;v.startY=v.y;v.pointX=t.pageX;v.pointY=t.pageY;v.startTime=w.timeStamp||Date.now();if(v.options.onScrollStart){v.options.onScrollStart.call(v,w)}v._bind(n);v._bind(d);v._bind(q)},_move:function(y){var v=this,t=r?y.touches[0]:y,u=t.pageX-v.pointX,m=t.pageY-v.pointY,z=v.x+u,x=v.y+m,w=y.timeStamp||Date.now();if(v.options.onBeforeScrollMove){v.options.onBeforeScrollMove.call(v,y)}v.pointX=t.pageX;v.pointY=t.pageY;if(z>0||z<v.maxScrollX){z=v.options.bounce?v.x+(u/2):z>=0||v.maxScrollX>=0?0:v.maxScrollX}if(x>0||x<v.maxScrollY){x=v.options.bounce?v.y+(m/2):x>=0||v.maxScrollY>=0?0:v.maxScrollY}if(v.absDistX<6&&v.absDistY<6){v.distX+=u;v.distY+=m;v.absDistX=o.abs(v.distX);v.absDistY=o.abs(v.distY);return}if(v.options.lockDirection){if(v.absDistX>v.absDistY+5){x=v.y;m=0}else{if(v.absDistY>v.absDistX+5){z=v.x;u=0}}}v.moved=true;v._pos(z,x);v.dirX=u>0?-1:u<0?1:0;v.dirY=m>0?-1:m<0?1:0;if(w-v.startTime>300){v.startTime=w;v.startX=v.x;v.startY=v.y}if(v.options.onScrollMove){v.options.onScrollMove.call(v,y)}},_end:function(y){if(r&&y.touches.length!=0){return}var w=this,C=r?y.changedTouches[0]:y,z,B,u={dist:0,time:0},m={dist:0,time:0},v=(y.timeStamp||Date.now())-w.startTime,A=w.x,x=w.y,t;w._unbind(n);w._unbind(d);w._unbind(q);if(w.options.onBeforeScrollEnd){w.options.onBeforeScrollEnd.call(w,y)}if(!w.moved){if(r){z=C.target;while(z.nodeType!=1){z=z.parentNode}if(z.tagName!="SELECT"&&z.tagName!="INPUT"&&z.tagName!="TEXTAREA"){B=document.createEvent("MouseEvents");B.initMouseEvent("click",true,true,y.view,1,C.screenX,C.screenY,C.clientX,C.clientY,y.ctrlKey,y.altKey,y.shiftKey,y.metaKey,0,null);B._fake=true;z.dispatchEvent(B)}}w._resetPos(200);if(w.options.onTouchEnd){w.options.onTouchEnd.call(w,y)}return}if(v<300&&w.options.momentum){u=A?w._momentum(A-w.startX,v,-w.x,w.scrollerW-w.wrapperW+w.x,w.options.bounce?w.wrapperW:0):u;m=x?w._momentum(x-w.startY,v,-w.y,(w.maxScrollY<0?w.scrollerH-w.wrapperH+w.y:0),w.options.bounce?w.wrapperH:0):m;A=w.x+u.dist;x=w.y+m.dist;if((w.x>0&&A>0)||(w.x<w.maxScrollX&&A<w.maxScrollX)){u={dist:0,time:0}}if((w.y>0&&x>0)||(w.y<w.maxScrollY&&x<w.maxScrollY)){m={dist:0,time:0}}}if(u.dist||m.dist){t=o.max(o.max(u.time,m.time),10);w.scrollTo(A,x,t);if(w.options.onTouchEnd){w.options.onTouchEnd.call(w,y)}return}w._resetPos(200);if(w.options.onTouchEnd){w.options.onTouchEnd.call(w,y)}},_resetPos:function(u){var m=this,v=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,t=m.y>=0||m.maxScrollY>0?0:m.y<m.maxScrollY?m.maxScrollY:m.y;if(v==m.x&&t==m.y){if(m.moved){if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}m.moved=false}return}m.scrollTo(v,t,u||0)},_mouseout:function(u){var m=u.relatedTarget;if(!m){this._end(u);return}while(m=m.parentNode){if(m==this.wrapper){return}}this._end(u)},_transitionEnd:function(t){var m=this;if(t.target!=m.scroller){return}m._unbind("webkitTransitionEnd");m._startAni()},_startAni:function(){var y=this,t=y.x,m=y.y,w=Date.now(),x,v;if(y.animating){return}if(!y.steps.length){y._resetPos(400);return}x=y.steps.shift();if(x.x==t&&x.y==m){x.time=0}y.animating=true;y.moved=true;if(y.options.useTransition){y._transitionTime(x.time);y._pos(x.x,x.y);y.animating=false;if(x.time){y._bind("webkitTransitionEnd")}else{y._resetPos(0)}return}(function u(){var z=Date.now(),B,A;if(z>=w+x.time){y._pos(x.x,x.y);y.animating=false;if(y.options.onAnimationEnd){y.options.onAnimationEnd.call(y)}y._startAni();return}z=(z-w)/x.time-1;v=o.sqrt(1-z*z);B=(x.x-t)*v+t;A=(x.y-m)*v+m;y._pos(B,A);if(y.animating){y.aniTime=l(u)}})()},_transitionTime:function(m){this.scroller.style[s+"TransitionDuration"]=m+"ms"},_momentum:function(z,t,x,m,B){var y=0.0006,u=o.abs(z)/t,v=(u*u)/(2*y),A=0,w=0;if(z>0&&v>x){w=B/(6/(v/u*y));x=x+w;u=u*x/v;v=x}else{if(z<0&&v>m){w=B/(6/(v/u*y));m=m+w;u=u*m/v;v=m}}v=v*(z<0?-1:1);A=u/y;return{dist:v,time:o.round(A)}},_offset:function(m){var u=-m.offsetLeft,t=-m.offsetTop;while(m=m.offsetParent){u-=m.offsetLeft;t-=m.offsetTop}return{left:u,top:t}},_bind:function(u,t,m){(t||this.scroller).addEventListener(u,this,!!m)},_unbind:function(u,t,m){(t||this.scroller).removeEventListener(u,this,!!m)},destroy:function(){var m=this;m.scroller.style[s+"Transform"]="";m._unbind(g,window);m._unbind(a);m._unbind(n);m._unbind(d);m._unbind(q);m._unbind("mouseout",m.wrapper);if(m.options.useTransition){m._unbind("webkitTransitionEnd")}if(m.options.onDestroy){m.options.onDestroy.call(m)}},refresh:function(){var m=this,t;m.wrapperW=m.wrapper.clientWidth;m.wrapperH=m.wrapper.clientHeight;m.scrollerW=m.scroller.offsetWidth;m.scrollerH=m.scroller.offsetHeight;m.maxScrollX=m.wrapperW-m.scrollerW;m.maxScrollY=m.wrapperH-m.scrollerH;m.dirX=0;m.dirY=0;m.hScroll=m.options.hScroll&&m.maxScrollX<0;m.vScroll=m.options.vScroll&&(!m.options.bounceLock&&!m.hScroll||m.scrollerH>m.wrapperH);t=m._offset(m.wrapper);m.wrapperOffsetLeft=-t.left;m.wrapperOffsetTop=-t.top;m.scroller.style[s+"TransitionDuration"]="0";m._resetPos(200)},scrollTo:function(m,B,A,z){var w=this,v=m,u,t;w.stop();if(!v.length){v=[{x:m,y:B,time:A,relative:z}]}for(u=0,t=v.length;u<t;u++){if(v[u].relative){v[u].x=w.x-v[u].x;v[u].y=w.y-v[u].y}w.steps.push({x:v[u].x,y:v[u].y,time:v[u].time||0})}w._startAni()},scrollToElement:function(m,u){var t=this,v;m=m.nodeType?m:t.scroller.querySelector(m);if(!m){return}v=t._offset(m);v.left+=t.wrapperOffsetLeft;v.top+=t.wrapperOffsetTop;v.left=v.left>0?0:v.left<t.maxScrollX?t.maxScrollX:v.left;v.top=v.top>0?0:v.top<t.maxScrollY?t.maxScrollY:v.top;u=u===undefined?o.max(o.abs(v.left)*2,o.abs(v.top)*2):u;t.scrollTo(v.left,v.top,u)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(n);this._unbind(d);this._unbind(q)},enable:function(){this.enabled=true},stop:function(){k(this.aniTime);this.steps=[];this.moved=false;this.animating=false}};if(typeof exports!=="undefined"){exports.iScroll=p}else{window.iScroll=p}})();