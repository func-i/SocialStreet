SocialStreet

SocialStreet is a web app that makes it easy for people to plan/find and attend local events.

Initial Setup for Development:

- Download the source
- Setup a new config/database.yml file based on config/database.example.yml
- Setup a new config/secrets.yml file based on config/secrets.example.yml
  - For the secret keys, setup a Facebook app under your real/developer account: http://www.facebook.com/developers
  - Set the site URL to: http://localhost:3000/ (Site Domain can be left blank)
  - You can call it something like: SocialStreet-dev
  - You do not need to give other developers access to this app, since its just for your development sandbox
- Install PostgreSQL 8.3, 8.4 or 9
- Install the pg gem (might be a bit of a pain on OSX)
- Download and install Redis: http://redis.io/download
- Start Redis Server:
  - Open a terminal tab to the [REDIS_ROOT (where you extracted and installed it) dir, and run: ./src/redis-server
- Run 1 Resque Worker:
  - Open a terminal tab to the [APP_ROOT] dir, and run: QUEUE=* rake environment resque:work
- Start Resque Web Server (optional, for debugging):
  - Open a terminal tab to the [APP_ROOT] dir, and run: bundle exec resque-web
  - This will start another web server here: http://localhost:5678/
  - This page should show 1 worker waiting for a job: http://0.0.0.0:5678/workers
- Start the SocialStreet App Server (duh):
  - Open a terminal tab to the [APP_ROOT] dir, and run: rails server

Running Tests (RSpec specs)
- For all tests, from the [APP_ROOT], run the command: rspec spec
  - If that doesn't work, try running: rake spec
- For a single test based on its line number, run the command: rspec spec/models/searchable_date_range_spec.rb:69
  - In this example, it runs the first spec ("it" statement) that it can find at or above line 69 in searchable_date_range

Using Facebook (IMPORTANT)
- You should create and use facebook "test" users to test in development mode, using the following steps:
  - Open a rails console with command: rails c
  - Create an fb_graph app instance: app = FbGraph::Application.new(FACEBOOK_APP_ID, :secret=>FACEBOOK_APP_SECRET)
  - Create a 1st test user: user1 = app.test_user!(:installed => true, :permissions => :read_stream)
  - Create a 2nd test user: user2 = app.test_user!(:installed => true, :permissions => :read_stream)
  - Friend the 2 users: user1.friend!(user2) 
  - Get user1's login_url (so you can login into SS w/ that user): user1.login_url
  - Assuming you are not signed into Facrbook, Paste the login URL into your browser
  - Goto your local SS instance (http://localhost:3000) and click Sign-in
- Facebook info on Test Users: https://developers.facebook.com/docs/test_users/

Docs:

- http://redis.io/download
- https://github.com/defunkt/resque
- http://redis.io/topics/data-types#sorted-sets
- https://github.com/ezmobius/redis-rb
- http://blog.waxman.me/how-to-build-a-fast-news-feed-in-redis
- https://developers.facebook.com/docs/test_users/

Article used for Slicehost Server setup:

- http://library.linode.com/databases/redis/ubuntu-10.04-lucid
